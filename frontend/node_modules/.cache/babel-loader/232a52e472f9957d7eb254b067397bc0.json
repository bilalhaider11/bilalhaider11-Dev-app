{"ast":null,"code":"import _regeneratorRuntime from\"/home/aht/Desktop/MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/aht/Desktop/MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{setAlert}from'./alert';import{CLEAR_PROFILE,GET_PROFILE,PROFILE_ERROR,UPDATE_PROFILE,ACCOUNT_DELETED,GET_PROFILES,GET_REPOS}from'./types';// Get current user profile\nexport var getCurrentProfile=function getCurrentProfile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/profile/me');case 3:res=_context.sent;dispatch({type:GET_PROFILE,payload:res.data.profile});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context.t0.response.data.msg,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Get all profiles\nexport var getProfiles=function getProfiles(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:CLEAR_PROFILE});_context2.prev=1;_context2.next=4;return axios.get('/api/profile');case 4:res=_context2.sent;console.log(res);dispatch({type:GET_PROFILES,payload:res.data});_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);dispatch({type:PROFILE_ERROR,payload:{msg:_context2.t0.response.data.msg,status:_context2.t0.response.status}});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Get profile by Id\nexport var getProfileById=function getProfileById(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"/api/profile/user/\".concat(userId));case 3:res=_context3.sent;dispatch({type:GET_PROFILE,payload:res.data});_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.response);dispatch({type:PROFILE_ERROR,payload:{msg:_context3.t0.response.data.msg,status:_context3.t0.response.status}});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// Get github repos\nexport var getGithubRepos=function getGithubRepos(username){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(\"/api/profile/github/\".concat(username));case 3:res=_context4.sent;dispatch({type:GET_REPOS,payload:res.data});_context4.next=11;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);dispatch({type:PROFILE_ERROR,payload:{msg:_context4.t0.response.data.msg,status:_context4.t0.response.status}});case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};//Create or Update Profile\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;config={headers:{'Content-Type':'application/json'}};_context5.next=4;return axios.post('/api/profile',formData,config);case 4:res=_context5.sent;console.log(res.data);dispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?'Profile Update':'Profile Created','success'));if(!edit){history.push('/dashboard');}_context5.next=16;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](0);errors=_context5.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context5.t0.response.data.errors,status:_context5.t0.response.status}});case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[0,11]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};// Add Experience\nexport var addExperience=function addExperience(formData,history){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;config={headers:{'Content-Type':'application/json'}};_context6.next=4;return axios.put('/api/profile/experience',formData,config);case 4:res=_context6.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Experience Added','success'));history.push('/dashboard');_context6.next=16;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](0);errors=_context6.t0.response.data.errors;console.log(errors);if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context6.t0.response.data.msg,status:_context6.t0.response.status}});case 16:case\"end\":return _context6.stop();}}},_callee6,null,[[0,10]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};// Add Education\nexport var addEducation=function addEducation(formData,history){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;config={headers:{'Content-Type':'application/json'}};_context7.next=4;return axios.put('/api/profile/education',formData,config);case 4:res=_context7.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Education Added','success'));history.push('/dashboard');_context7.next=15;break;case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](0);errors=_context7.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context7.t0.response.data.msg,status:_context7.t0.response.status}});case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[0,10]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};// Delete Experience\nexport var deleteExperience=function deleteExperience(id){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.delete(\"/api/profile/experience/\".concat(id));case 3:res=_context8.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Experience Removed','success'));_context8.next=12;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);console.log(_context8.t0);dispatch({type:PROFILE_ERROR,payload:{msg:_context8.t0.response.data.msg,status:_context8.t0.response.status}});case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};// Delete Education\nexport var deleteEducation=function deleteEducation(id){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return axios.delete(\"/api/profile/education/\".concat(id));case 3:res=_context9.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Education Removed','success'));_context9.next=11;break;case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context9.t0.response.statusText,status:_context9.t0.response.status}});case 11:case\"end\":return _context9.stop();}}},_callee9,null,[[0,8]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};//Delete Account & Profile\nexport var deleteAccount=function deleteAccount(){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!window.confirm('Are you sure? This can not be undone!')){_context10.next=12;break;}_context10.prev=1;_context10.next=4;return axios.delete('/api/profile');case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert('Your account has benn permanently deleted'));_context10.next=12;break;case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context10.t0.response.statusText,status:_context10.t0.response.status}});case 12:case\"end\":return _context10.stop();}}},_callee10,null,[[1,9]]);}));return function(_x10){return _ref10.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/aht/Desktop/MERN/client/src/actions/profile.js"],"names":["axios","setAlert","CLEAR_PROFILE","GET_PROFILE","PROFILE_ERROR","UPDATE_PROFILE","ACCOUNT_DELETED","GET_PROFILES","GET_REPOS","getCurrentProfile","dispatch","get","res","type","payload","data","profile","msg","response","status","getProfiles","console","log","getProfileById","userId","getGithubRepos","username","createProfile","formData","history","edit","config","headers","post","push","errors","forEach","error","addExperience","put","addEducation","deleteExperience","id","delete","deleteEducation","statusText","deleteAccount","window","confirm"],"mappings":"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","sourcesContent":["import axios from 'axios';\n\nimport {setAlert} from './alert';\n\n\nimport {\n    CLEAR_PROFILE, \n    GET_PROFILE, \n    PROFILE_ERROR, \n    UPDATE_PROFILE,\n    ACCOUNT_DELETED,\n    GET_PROFILES,\n    GET_REPOS\n} from './types';\n\n// Get current user profile\n\nexport const getCurrentProfile = () => async dispatch => {\n    try {\n        const res = await axios.get('/api/profile/me');\n\n        dispatch({\n            type: GET_PROFILE,\n            payload: res.data.profile\n        });\n\n    } catch (error) {\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.msg,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n// Get all profiles\n\nexport const getProfiles = () => async dispatch => {\n    dispatch({type: CLEAR_PROFILE});\n\n    try {\n        const res = await axios.get('/api/profile');\n        console.log(res )\n        dispatch({\n            type: GET_PROFILES,\n            payload: res.data\n        })\n    } catch (error) {\n        console.log(error)\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.msg,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n// Get profile by Id\n\nexport const getProfileById = (userId) => async dispatch => {\n    try {\n        const res = await axios.get(`/api/profile/user/${userId}`);\n        \n        dispatch({\n            type: GET_PROFILE,\n            payload: res.data\n        })\n    } catch (error) {\n        console.log(error.response)\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.msg,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n// Get github repos\n\nexport const getGithubRepos = (username) => async dispatch => {\n    try {\n        const res = await axios.get(`/api/profile/github/${username}`);\n        \n        dispatch({\n            type: GET_REPOS,\n            payload: res.data\n        })\n    } catch (error) {\n        console.log(error)\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.msg,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n//Create or Update Profile\n\nexport const createProfile = (formData, history, edit = false) => async dispatch => {\n    try {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        };\n        const res = await axios.post('/api/profile', formData, config);\n        console.log(res.data)\n        dispatch({\n            type: GET_PROFILE,\n            payload: res.data\n        })\n\n        dispatch(setAlert(edit ? 'Profile Update' : 'Profile Created', 'success'));\n\n        if(!edit) {\n            history.push('/dashboard');\n        }\n    } \n    catch (error) {\n        const errors = error.response.data.errors;\n\n        if(errors) {\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n        }\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.errors,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n// Add Experience\n\nexport const addExperience = (formData, history) => async dispatch => {\n    try {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        };\n\n        const res = await axios.put('/api/profile/experience', formData, config);\n\n\n        dispatch({\n            type: UPDATE_PROFILE,\n            payload: res.data\n        })\n\n        dispatch(setAlert('Experience Added', 'success'));\n        history.push('/dashboard');\n    } \n    catch (error) {\n        const errors = error.response.data.errors;\n        console.log(errors)\n        if(errors) {\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n        }\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.msg,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n// Add Education\n\nexport const addEducation = (formData, history) => async dispatch => {\n    try {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        };\n\n        const res = await axios.put('/api/profile/education', formData, config);\n\n\n        dispatch({\n            type: UPDATE_PROFILE,\n            payload: res.data\n        })\n\n        dispatch(setAlert('Education Added', 'success'));\n        history.push('/dashboard');\n    } \n    catch (error) {\n        const errors = error.response.data.errors;\n\n        if(errors) {\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n        }\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.msg,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n// Delete Experience\n\nexport const deleteExperience = id => async dispatch => {\n    try {\n        const res = await axios.delete(`/api/profile/experience/${id}`);\n\n        dispatch({\n            type: UPDATE_PROFILE,\n            payload: res.data\n        });\n\n        dispatch(setAlert('Experience Removed', 'success'));\n    } \n    catch (error) {\n        console.log(error)\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.data.msg,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n// Delete Education\n\nexport const deleteEducation = id => async dispatch => {\n    try {\n        const res = await axios.delete(`/api/profile/education/${id}`);\n\n        dispatch({\n            type: UPDATE_PROFILE,\n            payload: res.data\n        });\n\n        dispatch(setAlert('Education Removed', 'success'));\n    } \n    catch (error) {\n        dispatch({\n            type: PROFILE_ERROR,\n            payload: {\n                msg: error.response.statusText,\n                status: error.response.status\n            }\n        })\n    }\n};\n\n//Delete Account & Profile\n\nexport const deleteAccount = () => async dispatch => {\n    if(window.confirm('Are you sure? This can not be undone!')) {\n        try {\n            await axios.delete('/api/profile');\n    \n            dispatch({type: CLEAR_PROFILE});\n            dispatch({type: ACCOUNT_DELETED});\n    \n            dispatch(setAlert('Your account has benn permanently deleted'));\n        } \n        catch (error) {\n            dispatch({\n                type: PROFILE_ERROR,\n                payload: {\n                    msg: error.response.statusText,\n                    status: error.response.status\n                }\n            })\n        }\n    }\n};"]},"metadata":{},"sourceType":"module"}